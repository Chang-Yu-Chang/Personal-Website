<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Chang-Yu Chang on Chang-Yu Chang</title>
    <link>/</link>
    <description>Recent content in Chang-Yu Chang on Chang-Yu Chang</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2018</copyright>
    <lastBuildDate>Sun, 15 Oct 2017 00:00:00 -0400</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Generalized Birthday Problem</title>
      <link>/post/generalized-birthday-problem/</link>
      <pubDate>Wed, 14 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/generalized-birthday-problem/</guid>
      <description>&lt;p&gt;This tiny project comes from the coding class I am taking this semester. The simplest birthday problem is as followed: how many people should be in a room such that the probability of a birthday shared by at least two persons is just above 0.5? I found this problem is very interesting. Throughout the process dealing this problem, some powerful R packages and essential coding skills are incorporated for more efficient simulation. In this project, I will try to address generalized birthday problem from very first approach (easy coding but computer expensive and slow) to somehow more advanced approach.&lt;/p&gt;
&lt;p&gt;Here is the outline for this article&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;https://changyuchang.netlify.com/post/generalized-birthday-problem/#what&amp;#39;s-probability-of-one-birthday-shared-by-two-persons-in-any-size-of-room?&#34;&gt;What’s probability of one birthday shared by two persons in any size of room?&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;&#34;&gt;Binary search&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a href=&#34;&#34;&gt;Dynamical number of replicate&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;whats-probability-of-one-birthday-shared-by-two-persons-in-any-size-of-room&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;What’s probability of one birthday shared by two persons in any size of room?&lt;/h3&gt;
&lt;p&gt;The probability we are interested calculated such that a birthday shared by at least &lt;em&gt;k&lt;/em&gt; persons. The targeted probability &lt;em&gt;p&lt;/em&gt; here is 0.5. For each room size &lt;em&gt;i&lt;/em&gt;, &lt;em&gt;r&lt;/em&gt; replicates are tested.&lt;/p&gt;
&lt;p&gt;In the following case, I did only 20 replicates.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;k &amp;lt;- 2                # Birthday shared by k persons
p &amp;lt;- 0.5              # Targetd probability
r &amp;lt;- 20               # Replicates
result &amp;lt;- rep(0, 100) # A vector for saving result 
i &amp;lt;- 10                  # Room size&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now here is trick. For each room size, create a single matrix that has &lt;em&gt;r&lt;/em&gt; rows and &lt;em&gt;i&lt;/em&gt; columns. The next step is to check by row: if there are at least &lt;em&gt;k=2&lt;/em&gt; persons in one room (&lt;em&gt;i=10&lt;/em&gt;) sharing the same birthday, return &lt;code&gt;TRUE&lt;/code&gt;. Use &lt;code&gt;apply&lt;/code&gt; to implicitly loop through each row. The result probability would be the sum of this vector divided by total replicate &lt;em&gt;r&lt;/em&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;set.seed(12345)
birth &amp;lt;- matrix(sample(1:365, r*i, replace=TRUE), nrow=r, ncol=i)
birth&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
##  [1,]  264  166  286  289  318  108  205  191  271    62
##  [2,]  320  120  157   95  188  226  188  254  218   150
##  [3,]  278  353  339  360    4  356   33   79  311    72
##  [4,]  324  259  283  277    8  226  250  230  298    95
##  [5,]  167  236   95  358   53  191  260   54  139   355
##  [6,]   61  143  118   80  112  330  293  351  180   297
##  [7,]  119  255   22  347  302  233  345  362  363   127
##  [8,]  186  199   16   55  184  316   69  182   64   343
##  [9,]  266   83   21  220  294   92  102  336  305    60
## [10,]  362  177  229  346   23   79  283  136  145    58
## [11,]   13  290  353  252  339  223   13  302  354   276
## [12,]   56    3  302  185  295  140  246  205   69   324
## [13,]  269   69  115  137   29  276  297  291  274   112
## [14,]    1  249   78  123  220  139  243  129  113   114
## [15,]  143  136  268   18  261  291  345   77  139   360
## [16,]  169  132  183  226  188  331  320  287  275     3
## [17,]  142  318  267  351  263  360  255  250  258   101
## [18,]  147  331   30  240  274  215   68  158  337   292
## [19,]   66  226  159  187   35    4   36  309  291    89
## [20,]  348   49   87   55  146  118  295  220  303   168&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The probability for 2 persons sharing the same birthday in a room with 10 persones is roughly 0.1.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;sum(apply(birth, 1, function(x) max(tabulate(x))&amp;gt;=k )) / r&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 0.1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now test different room sizes. Say I wanna test room sizes ranging from &lt;em&gt;k&lt;/em&gt; to 100 (testing room size smaller than &lt;em&gt;k&lt;/em&gt; is nonsense). Use &lt;code&gt;for&lt;/code&gt; loop to go through room size from k to 100.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;k &amp;lt;- 2                # Birthday shared by k persons
p &amp;lt;- 0.5              # Targetd probability
r &amp;lt;- 100000           # Replicates
result &amp;lt;- rep(0, 100) # A vector for saving result 

system.time({         # Record time used
for (i in 1:100) {    # Test room sizes from 1 to 100 persons
  birth &amp;lt;- matrix(sample(1:365, r*i, replace=TRUE), nrow=r, ncol=i)
  result[i] &amp;lt;- sum(apply(birth, 1, function(x) max(tabulate(x))&amp;gt;=k )) / r
}
})&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    user  system elapsed 
##  55.684   4.624  60.952&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This simulation is extremely slow. Something is pretty obvious, for example, if I already know the result is going to be 23 just after calculating it, I don’t need to do the else (24-100), which consumes tons of time. I will show you some ways to speed up and accurate the simulation, including binary search, dynamical tested replicate, and Rcpp package.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;plot(result, type=&amp;quot;l&amp;quot;, xlab=&amp;quot;room size&amp;quot;, ylab=&amp;quot;probability&amp;quot;, main=&amp;quot;probability of a birthday shared by k persons&amp;quot;)
abline(h=p, col=&amp;quot;red&amp;quot;) &lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;./post/2018-03-14-generalized-birthday-problem_files/figure-html/unnamed-chunk-5-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The answer is 23 persons.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;min(which(result&amp;gt;p))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 23&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;binary-search&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Binary search&lt;/h3&gt;
&lt;p&gt;If I know where I stand is still far away from the target probability, can I apply a larger step, not step-by-step, in order to move quickly? A good way is to employ binary search algorithm. The key concept is to skip unecessary mid-points (in our case, room sizes) for saving computer time. Given a series of &lt;em&gt;n&lt;/em&gt; sorted room sizes ranging from lower bound &lt;span class=&#34;math inline&#34;&gt;\(L=1\)&lt;/span&gt; to upper bound &lt;span class=&#34;math inline&#34;&gt;\(R=n\)&lt;/span&gt;, then the corresponding probability of at least k people sharing the same birthday are &lt;span class=&#34;math inline&#34;&gt;\(p_1, p_2, \dots, p_n\)&lt;/span&gt;). Our goal is to find the probability of room size that is close and slightly large than 0.5 &lt;span class=&#34;math inline&#34;&gt;\(p_t=0.5\)&lt;/span&gt;. Here is the procedure:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;Set L to 1 and R to n. R would be always larger than L.&lt;/li&gt;
&lt;li&gt;Calculate i (position fo the middle element). Set i to floor since the room size should be an integer.&lt;/li&gt;
&lt;li&gt;If &lt;span class=&#34;math inline&#34;&gt;\(p_i&amp;lt;p_t\)&lt;/span&gt;, set L to i + 1 and go to step 2.&lt;/li&gt;
&lt;li&gt;If &lt;span class=&#34;math inline&#34;&gt;\(p_i&amp;gt;p_t\)&lt;/span&gt;, set R to i − 1 and go to step 2.&lt;/li&gt;
&lt;li&gt;Repeat step 2-4 until &lt;span class=&#34;math inline&#34;&gt;\(p_i=p_t\)&lt;/span&gt;, the search is done. m is our answer.&lt;/li&gt;
&lt;/ol&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;k &amp;lt;- 2                # Birthday shared by k persons
p &amp;lt;- 0.5              # Targetd probability
r &amp;lt;- 100000           # Replicates
result &amp;lt;- rep(0, 100) # A vector for saving result 

gbp &amp;lt;- function(k=3, p=.5, r=100000, threshold=.001) {
  i &amp;lt;- k                       # Tested room size; start from k persons in a room
  x &amp;lt;- 1                       # Counter for while loop
  result &amp;lt;- 0                  # An object for temporarily saved result
  L &amp;lt;- 0                       # Lower bound for binary search
  R &amp;lt;- k^4+100+sample(-k:k, 1) # Upper bound for binary search
  record &amp;lt;- NULL               # A record for which room size has been tested
 while (abs(result - p) &amp;gt;= threshold) {
    # Tested room size
    i &amp;lt;- floor((L+R)/2)

    # Calculate probability
    birth &amp;lt;- matrix(sample(1:365, r*i, replace=TRUE), nrow=r, ncol=i)
    result[i] &amp;lt;- sum(apply(birth, 1, function(x) max(tabulate(x))&amp;gt;=k )) / r
    if (result &amp;gt;= p) R &amp;lt;- i
    if (result &amp;lt; p) L &amp;lt;- i
    record[x] &amp;lt;- i       # Keep a record on every tested room size
    x &amp;lt;- x + 1           # Counter

    # Stop the loop if trapped at local value
    if (sum(duplicated(tail(record,5))) == 2 | L == R) break
 }
  ans &amp;lt;- R
  return(ans)
}
gbp(k=2,p=0.5)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 114&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;system.time(gbp(k=2, p=.5))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used

## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in while (abs(result - p) &amp;gt;= threshold) {: the condition has length
## &amp;gt; 1 and only the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;gt;= p) R &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## Warning in if (result &amp;lt; p) L &amp;lt;- i: the condition has length &amp;gt; 1 and only
## the first element will be used&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##    user  system elapsed 
##   6.523   0.661   7.312&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;dynamical-number-of-replicate&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Dynamical number of replicate&lt;/h3&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>How to build up this website?</title>
      <link>/post/how-to-build-up-this-website/</link>
      <pubDate>Thu, 08 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/how-to-build-up-this-website/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://changyuchang.netlify.com/post/how-to-build-up-this-website/#intro&#34;&gt;Intro&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://changyuchang.netlify.com/post/how-to-build-up-this-website/#tutorials&#34;&gt;Tutorials&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://changyuchang.netlify.com/post/how-to-build-up-this-website/#caveats-i-have-jumped-in&#34;&gt;Caveats I have jumped in&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div id=&#34;intro&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Intro&lt;/h1&gt;
&lt;p&gt;The first (meaningful) post for this new website! After searching for many blog managers, I finally found out a cool and nice way to generate a good-looking website. The whole website is built under a &lt;code&gt;R&lt;/code&gt; package &lt;code&gt;blogdown&lt;/code&gt;, which is based on another pretty handy package &lt;code&gt;rmarkdown&lt;/code&gt; that helps you markdown pdf or html file in Rstudio. &lt;code&gt;blogdown&lt;/code&gt; employs a site generator called Hugo. With that, there are numerous &lt;a href=&#34;http://themes.gohugo.io&#34;&gt;themes&lt;/a&gt; developed by other Hugo users.&lt;/p&gt;
&lt;p&gt;Some other features would be detailedly described in tutorials, here I wanna spent more time on the problems that I encountered during making the website.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;tutorials&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Tutorials&lt;/h1&gt;
&lt;p&gt;Though now everything seems straightforward, it took me many hours to figure out how to make this website… Anyway, check these sources out!&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;a href=&#34;https://bookdown.org/yihui/bookdown/&#34;&gt;bookdown: Authoring Books and Technical Documents with R Markdown&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A book from authors. I found the most useful section is the first few paragraphs introducing the package and ‘&lt;em&gt;1.7 A recommended workflow&lt;/em&gt;’. The details are somehow not clear to me, because I had no experience building a website and Github. For people like me just starting to use github, I recommend the tutorials followed.&lt;/p&gt;
&lt;ol start=&#34;2&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;a href=&#34;https://alison.rbind.io/post/up-and-running-with-blogdown/&#34;&gt;Another tutorial (more pictures and workflow) from the author&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I like the flowchart that this tutorial uses to decribe the workflow. More pictures, more intuitive.&lt;/p&gt;
&lt;ol start=&#34;3&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;a href=&#34;https://cosx.org/2018/01/build-blog-with-blogdown-hugo-netlify-github/&#34;&gt;Tutorial for blogdown in Chinese (中文教學)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Found this one later after I have almost finished the whole website. It’s helpful if you read Chinese.&lt;/p&gt;
&lt;ol start=&#34;4&#34; style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;a href=&#34;https://support.rstudio.com/hc/en-us/articles/200532077-Version-Control-with-Git-and-SVN&#34;&gt;Tutorial for using github with Rstudio&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This one shows how to connect github with Rstudio. Also check out &lt;a href=&#34;http://r-bio.github.io/intro-git-rstudio/&#34;&gt;this one&lt;/a&gt; if you like more illustrationss. After downloading git, the simplest way to do this is as followed: create a github respository, copy the link, go back to Rstudio and create a R package under vision control, paste the link, and be happy. If you read Chinese, this &lt;a href=&#34;https://hellolynn.hpd.io/2017/01/18/git%E6%96%B0%E6%89%8B%E5%85%A5%E9%96%80%E6%95%99%E5%AD%B8-part-1/&#34;&gt;website&lt;/a&gt; really helped me understand how git works.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;caveats-i-have-jumped-in&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Caveats I have jumped in&lt;/h1&gt;
&lt;p&gt;Belows are some caveats I have spent a lot of time troubleshooting.&lt;/p&gt;
&lt;div id=&#34;theme-choose-a-well-documented-theme.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;1. Theme! Choose a well documented theme.&lt;/h3&gt;
&lt;p&gt;I chose &lt;a href=&#34;https://github.com/gcushen/hugo-academic/&#34;&gt;hugo-academic&lt;/a&gt; for my website. One very first reason is the detailed description about each tunable feature. Another reason is intuitive: this website is designed for person in academics.&lt;/p&gt;
&lt;p&gt;In the beginning, I browsed through all the themes and cannot make the choice. The first theme that I picked has elegant design and comfortable layout but shows very limited information about how to tune some of the features. So when the other coding/building problems came in, I did’t know where the problem was from. Be wise to choose a beautiful and well described theme.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;make-sure-you-understand-how-git-and-github-work-and-how-rstudio-interacts-with-them.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;2. Make sure you understand how git and github work, and how Rstudio interacts with them.&lt;/h3&gt;
&lt;p&gt;For people who have intensively used github, this might be trivial. But it was NOT trivial to me at all to understand how it works. It took me a while (maybe 0.5-1 hour reading about the introduction articles) to understand what git and github are, and how to push code from Rstudio to github.&lt;/p&gt;
&lt;p&gt;Here are my understanding of these terms.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Rstudio: the interface for you to write r, rmd, and other codes.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;git: a version control system for a team to track changes in code. Yes, a team. Now this is your personal website so that the only team member is you. Noted that it is possible to share the source code with other team members and co-manage the source code on github.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;github: an online and open-source version of git. You need an github account to use &lt;code&gt;blogdown&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Hugo: a site generator, like a witchcraft beautifying your website. I guess the reason that &lt;code&gt;blogdown&lt;/code&gt; authors recommends Hugo is that there are many user-contributed themes available. Authors also provide the &lt;a href=&#34;https://bookdown.org/yihui/blogdown/migration.html&#34;&gt;way&lt;/a&gt; to migrate from other site generators, such as Jekyll and WordPress.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;netlify: deploys static website from your source code on github, and provides free domains (where your website will have a prefix “.netlify.com”). If you have registered a domain outside netlify for yourself, you could also customize your domain to what you like.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div id=&#34;some-commands-and-steps-only-need-to-be-done-once.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;3. Some commands and steps only need to be done once.&lt;/h3&gt;
&lt;p&gt;For example, to initiate the website, you only need to go through the workflow below once:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;&lt;p&gt;Connect Rstudio with github by createing a new project under vision control (you can see this option when creating a new R project: “Vision control”)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Create a new website by the function &lt;code&gt;blogdown::new_site(sample=&#39;TRUE&#39;, theme=&#39;hugo_academic&#39;)&lt;/code&gt;. It will create a skeleton under your project folder locally. You can change to a theme you like. The argument &lt;code&gt;sample&lt;/code&gt; create a sample in &lt;code&gt;/theme&lt;/code&gt; folder, which you can refer to in the future if you remove a feature and want it back again.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Push code to github.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Connect the &lt;code&gt;/public&lt;/code&gt; folder in your github respository (not the local folder in your laptop) to netlify by simply dragging the folder to netlify. Set up deploy settings, check hugo version (see next caveat), and click deploy.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Your website becomes alive!&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Now this is the most important part. I say important because it took me hours to do silly things again and again without fully comprehension. To update the website, there are something you do or do not need to do.&lt;/p&gt;
&lt;div id=&#34;do-to-update&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Do to update&lt;/h4&gt;
&lt;p&gt;After initiating, in order to update the website, you edit the static website in Rstudio in your laptop. You will see the git window in Rstudio shows new “modified” items. &lt;code&gt;blogdown&lt;/code&gt; will automatically update local &lt;code&gt;/public&lt;/code&gt; (“local” means in your laptop) every time your save the &lt;code&gt;.rm&lt;/code&gt; or &lt;code&gt;.rmd&lt;/code&gt; file. When you update blogs locally, the only thing you need to do is to push the updated code (the whole folder of your website, although only github &lt;code&gt;/public&lt;/code&gt; is used to deploy) to github, and wait for netlify to automatically deploy. It might take a few minutes for netlifly to deploy your website, but don’t worry – things getting simplier after the first try.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;dont-do-it-after-website-initiated&#34; class=&#34;section level4&#34;&gt;
&lt;h4&gt;Don’t do it after website initiated&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Don’t build the new site again by &lt;code&gt;new_site()&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Better not change the theme after editing on it. Stick to the theme you choose.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Don’t need to depoly manually after github connected to netlify.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Don’t manully deploy the website again on netlify.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;check-hugo-version-and-make-sure-its-right-in-netlify&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;4. Check Hugo version, and make sure it’s right in netlify&lt;/h3&gt;
&lt;p&gt;If you find netlify doesn’t deploy your website successfully (and comes in with error 255), it might be due to the Hugo version. Some themes are built under later Hugo version. Make sure you check the Hugo version that &lt;code&gt;blogdown&lt;/code&gt; uses by the function &lt;code&gt;blogdown::hugo_version()&lt;/code&gt;. Now the version is:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;blogdown::hugo_version()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] &amp;#39;0.37.1&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Go to netlify deploy setting / Build environment variables / Type in the key &lt;em&gt;HUGO_VERSION&lt;/em&gt; and value &lt;em&gt;0.37.1&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;there-is-updating-problem-with-chinese-characters.&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;5. There is updating problem with Chinese characters.&lt;/h3&gt;
&lt;p&gt;I have a stong incentive to write random stuffs in Chinese. There is problem updating the website locally in Rstudio Viewer when some Chinese characters showing in the website. I still don’t know why.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>Migration and Microbial Community</title>
      <link>/project/migration-microbial-community/</link>
      <pubDate>Thu, 08 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/project/migration-microbial-community/</guid>
      <description>&lt;p&gt;Something about the migration project.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>New website!</title>
      <link>/post/new-website/</link>
      <pubDate>Thu, 08 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/new-website/</guid>
      <description>&lt;p&gt;Test how to post.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>New website!</title>
      <link>/post/new-website/</link>
      <pubDate>Thu, 08 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/post/new-website/</guid>
      <description>&lt;p&gt;Test how to post.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Some toy models</title>
      <link>/project/toy-models/</link>
      <pubDate>Thu, 08 Mar 2018 00:00:00 +0000</pubDate>
      
      <guid>/project/toy-models/</guid>
      <description>&lt;p&gt;Generalized birthday problem&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
